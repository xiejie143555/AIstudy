# 日子产品需求规格书（可供性驱动设计）

## 1. 产品环境

**名称：** 日子
**标语：** 不要满不在乎地过日子，好像你可以活一千年似的
**版本：** 1.0.0

**环境描述：**
"日子"创造了一个私密的数字空间，让用户能够即时捕捉生活片段、培养良好习惯，并通过AI技术深化自我认知。这个环境优先考虑隐私保护和简约交互，让记录成为一种自然的生命延伸。

**主要智能体：**
- 人类记录者：具有文本输入、触摸操作、视觉感知能力
- AI理解引擎：具有自然语言处理、情感分析、模式识别能力
- AI数字分身（可选）：具有个性化回应、记忆模拟能力

**核心可供性：**
1. 即时记录可供性（支持离线环境）
2. 习惯养成可供性（打卡追踪）
3. 时间导航可供性（日历浏览）
4. 数据导出可供性（Markdown/JSON格式）
5. AI增强可供性（需明确授权）

## 2. 可供性目录

### MAS-01：捕捉瞬间思绪

**故事主题：**
将稍纵即逝的想法转化为永久记忆，在完全私密的环境中自由表达

**核心可供性序列：**
1. **即时进入可供性**：一键开始记录（感知：突出的新建按钮）
2. **流畅输入可供性**：无干扰的文本输入（感知：纯净的白色画布）
3. **自动保存可供性**：无需手动保存的安心（感知：保存状态提示）

**意义闭环：**
想法从易逝的脑内活动转化为持久的数字记忆，用户获得思维外化的掌控感

**内在动机：**
- 兴趣：捕捉灵感带来的满足感
- 熟练：越来越擅长及时记录重要想法
- 自主：完全自由的表达空间

**故事依赖：**
- 启用：MAS-02（回顾过往）
- 要求：无（这是基础故事）

**排除范围：**
- 复杂的格式化选项
- 多媒体附件（第二阶段）
- 社交分享功能

### MAS-02：时间中的自我导航

**故事主题：**
在时间维度上重新发现过去的自己，理解个人成长的轨迹

**核心可供性序列：**
1. **时间浏览可供性**：直观的时间线导航（感知：日历视图）
2. **快速定位可供性**：按日期跳转（感知：日期选择器）
3. **内容预览可供性**：摘要式浏览（感知：卡片式展示）

**意义闭环：**
通过时间维度的回顾，用户发现自我成长的模式，获得持续进步的方向感

### MAS-03：培养微小习惯

**故事主题：**
通过每日打卡的仪式感，将良好习惯融入生活节律

**核心可供性序列：**
1. **习惯创建可供性**：自定义打卡项目（感知：添加按钮）
2. **完成标记可供性**：一键打卡确认（感知：勾选动画）
3. **进度可视化可供性**：连续天数展示（感知：计数器）

**意义闭环：**
通过可视化的进度积累，用户获得坚持的动力，习惯逐渐内化为自然行为

### MAS-04：拥有个人数据

**故事主题：**
确保用户对其生命记录拥有完全的所有权和控制权

**核心可供性序列：**
1. **导出请求可供性**：简单的导出操作（感知：设置中的导出选项）
2. **格式选择可供性**：Markdown或JSON（感知：格式选择器）
3. **离线访问可供性**：无需网络的本地导出（感知：进度指示）

**意义闭环：**
用户获得数据主权的确认感，确保个人记忆不会因平台变化而丢失

## 3. 详细可供性规范

### 3.1 主要可供性（即时可见）

#### AFF-01：即时记录入口

**层级：** 主要
**启用动作：** 创建新日记条目

**环境属性：**

| 属性 | 值 | 可感知者 |
|------|-----|----------|
| 视觉线索 | 固定在右下角的圆形按钮，带有"+"图标 | 人类 |
| 语义标记 | `<button aria-label="新建日记" role="button">` | AI智能体 |
| 交互模式 | 单击/触摸激活 | 两者 |

**智能体要求：**

| 智能体类型 | 所需能力 |
|------------|----------|
| 人类 | 视觉感知，手指点击或鼠标操作 |
| AI智能体 | DOM访问，点击事件触发能力 |

**感知-行动耦合：**

**人类感知：**
- **看见**：醒目的圆形按钮，带有加号图标
- **行动**：点击按钮创建新条目
- **反馈**：立即进入编辑界面

**AI感知：**
- **检测**：具有特定aria-label的按钮元素
- **执行**：触发click事件
- **验证**：URL变化或编辑界面出现

**约束：**
- C4：必须支持离线操作
- C1：创建的内容需要加密存储

#### AFF-02：文本输入区域

**层级：** 主要
**启用动作：** 输入日记内容

**环境属性：**

| 属性 | 值 | 可感知者 |
|------|-----|----------|
| 视觉线索 | 全屏白色文本区域，无干扰元素 | 人类 |
| 语义标记 | `<textarea placeholder="今天发生了什么...">` | AI智能体 |
| 交互模式 | 键盘输入，自动保存 | 两者 |

**特殊考虑：**
- 支持离线环境下的本地存储
- 自动保存间隔不超过30秒
- 字数统计显示（可选）

#### AFF-03：时间导航

**层级：** 主要
**启用动作：** 浏览不同日期的记录

**环境属性：**

| 属性 | 值 | 可感知者 |
|------|-----|----------|
| 视觉线索 | 顶部日历条，显示月份和日期 | 人类 |
| 语义标记 | `<nav role="navigation" aria-label="时间导航">` | AI智能体 |
| 交互模式 | 点击日期切换/滑动切换 | 两者 |

### 3.2 次要可供性（交互中显现）

#### AFF-04：习惯打卡

**层级：** 次要
**启用动作：** 记录日常习惯完成情况

**显现条件：** 用户在特定日期视图下

**环境属性：**

| 属性 | 值 | 可感知者 |
|------|-----|----------|
| 视觉线索 | 日期下方的彩色圆点或勾选框 | 人类 |
| 语义标记 | `<input type="checkbox" class="habit-check">` | AI智能体 |
| 交互模式 | 点击切换完成状态 | 两者 |

#### AFF-05：心情标记

**层级：** 次要
**启用动作：** 为日记添加情感标签

**显现条件：** 编辑模式下点击心情图标

### 3.3 潜在可供性（探索中发现）

#### AFF-06：AI洞察生成

**层级：** 潜在
**启用动作：** 基于历史记录生成个人洞察

**发现路径：** 连续记录7天后解锁

**特殊要求：**
- 需要用户明确授权（C3约束）
- 提供撤销授权的选项
- 解释AI如何使用数据

#### AFF-07：数据导出

**层级：** 潜在
**启用动作：** 导出所有个人数据

**发现路径：** 设置菜单中的高级选项

## 4. 环境约束

### 4.1 物理约束

| 约束 | 对可供性的影响 |
|------|----------------|
| 移动设备屏幕尺寸 | 限制同时显示的导航元素数量 |
| 触摸输入精度 | 按钮和交互元素最小44px尺寸 |
| 网络连接不稳定 | 必须支持离线记录和同步 |

### 4.2 结构约束

| 约束 | 对可供性的影响 |
|------|----------------|
| 端到端加密 | 服务器端无法处理明文数据 |
| 本地优先架构 | 云端同步是可选增强功能 |
| 用户数据模型 | 所有数据强关联到特定用户 |

### 4.3 安全约束（来自real.md）

| 约束 | 可供性限制 |
|------|------------|
| C1：数据加密 | 某些数据无法提供给所有智能体 |
| C2：数据导出 | 必须提供完整的导出可供性 |
| C3：AI授权 | AI相关可供性需要额外授权步骤 |
| C4：离线记录 | 核心记录功能不能依赖网络 |

## 7. 非可供性（明确阻止的行动）

| 被阻止的行动 | 阻止理由 | 替代方案 |
|--------------|----------|----------|
| 公开分享日记 | 隐私保护（C1约束） | 仅支持本地导出 |
| 服务器端明文存储 | 数据安全要求 | 端到端加密 |
| 强制用户注册 | 降低使用门槛 | 支持离线使用 |
| 实时协作编辑 | 隐私和复杂度考虑 | 个人专属空间 |
| 广告展示 | 保持专注体验 | 付费模式 |

---

**文档版本：** 1.0.0
**创建日期：** 2024-12-08
**维护者：** 产品团队
**审查状态：** 待审查