# 认知模型 cog.md

## 核心实体定义

### 1. 用户（User）
**定义**：使用"日子"产品记录日常生活内容的个体

**属性**：
- 用户ID：唯一标识符
- 创建时间：账户创建时间戳
- 最后活跃时间：最近一次使用产品的时间
- 隐私设置：数据可见性、AI功能开关等配置
- 数字分身授权：授权给AI使用的内容范围和权限

**行为**：
- 创建记录（日记、打卡等）
- 查看历史记录
- 搜索过往内容
- 导出数据
- 管理数字分身授权
- 与数字分身对话

### 2. 记录内容（Entry）
**定义**：用户创建的所有形式的记录，包括日记、打卡、笔记等

**属性**：
- 内容ID：唯一标识符
- 创建时间：记录创建的时间戳
- 修改时间：最后一次修改的时间戳
- 内容类型：日记、打卡、笔记、图片等
- 内容文本：实际的文字内容
- 标签：用户添加的分类标签
- 情绪标签：AI分析的情绪状态（可选）
- 位置信息：记录时的地理位置（可选）
- 天气信息：记录时的天气状况（可选）
- AI授权状态：是否授权用于数字分身训练

**行为**：
- 被创建、编辑、删除
- 被搜索和筛选
- 被导出
- 被授权/取消授权给AI使用

### 3. AI智能体（AI Agent）
**定义**：理解并加工用户内容的AI系统，用于生成数字分身

**属性**：
- 智能体ID：唯一标识符
- 创建时间：数字分身创建时间
- 训练数据范围：用于训练的内容范围
- 人格特征：从用户内容中提取的特征摘要
- 对话历史：与用户的对话记录

**行为**：
- 分析用户授权的内容
- 提取用户特征和模式
- 生成数字分身人格
- 与用户进行对话
- 学习和适应用户偏好

### 4. 日历（Calendar）
**定义**：时间维度的组织框架，用于按时间查看和管理记录

**属性**：
- 日期：特定的年月日
- 记录列表：该日期的所有记录
- 统计信息：该日期的记录数量、类型分布等
- 连续打卡：各种打卡类型的连续天数

**行为**：
- 按天、周、月、年展示记录
- 计算连续打卡天数
- 生成时间相关的统计报告
- 支持时间跳转和导航

## 实体关系

### 用户 ↔ 记录内容
- 一对多关系：一个用户可以创建多条记录
- 记录内容完全属于创建它的用户
- 用户拥有对其记录的所有控制权

### 用户 ↔ AI智能体
- 一对一关系：每个用户最多有一个数字分身
- 用户完全控制是否创建和使用数字分身
- 数字分身只能访问用户明确授权的内容

### 记录内容 ↔ AI智能体
- 多对一关系：多条记录可以用于训练一个数字分身
- 记录内容需要被明确授权后才能被AI使用
- 授权可以随时撤销

### 日历 ↔ 记录内容
- 一对多关系：一个日期可以包含多条记录
- 记录按照创建时间自动关联到对应日期
- 支持按日历视图浏览和检索记录

## 数据流模型

### 记录创建流
```
用户 → 创建记录 → 本地存储 → 同步到云端（可选）
```

### AI训练流
```
用户授权 → 选择记录范围 → AI分析 → 生成数字分身
```

### 对话流
```
用户提问 → 数字分身处理 → 生成回复 → 记录对话历史
```

### 导出流
```
用户请求导出 → 选择范围格式 → 生成导出文件 → 本地保存
```

## 状态模型

### 记录状态
- 草稿：正在编辑，未保存
- 已保存：已存储到本地
- 已同步：已上传到云端
- 已授权：可用于AI训练

### 同步状态
- 离线：网络不可用
- 待同步：有未同步的更改
- 同步中：正在进行数据同步
- 已同步：所有数据已同步

### AI状态
- 未创建：数字分身不存在
- 训练中：正在分析用户内容
- 就绪：数字分身可用
- 已暂停：用户暂停了AI功能